<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>RateLimiter</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RateLimiter";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bluegosling/concurrent/RateLimitedBlockingQueue.html" title="class in com.bluegosling.concurrent"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/bluegosling/concurrent/ReentranceException.html" title="class in com.bluegosling.concurrent"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bluegosling/concurrent/RateLimiter.html" target="_top">Frames</a></li>
<li><a href="RateLimiter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bluegosling.concurrent</div>
<h2 title="Class RateLimiter" class="title">Class RateLimiter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bluegosling.concurrent.RateLimiter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">RateLimiter</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A synchronizer that can be used to limit the rate, or frequency, of an operation. This uses a
 leaky bucket algorithm to control the rate.
 
 <p>This is effectively just like Guava's <code>RateLimiter</code>
 except with several additional features:
 <ol>
 <li>This version allows control over the bucket size (e.g. maximum number of stored permits).
 </li>
 <li>This version allows creation of the limiter with a specific initial bucket size, which can be
 be greater than the steady-state bucket size. This allows an initial burst that is larger than
 allowed in steady-state operations.</li>
 <li>This version provides a jitter parameter, which adds a small amount of randomness to the
 delay between permits being added to the bucket. Note that using jitter will reduce performance
 slightly. For typical rates, this should not be an issue. But for extremely high rates (100s of
 thousands per second or millions per second), this can reduce the actual observed rate due to
 contention over the limiter while computing jitter.</li>
 <li>This version provides interruptible acquisition methods. (Guava's version uses
 uninterruptible blocking when an acquirer needs to wait for a permit.)</li>
 <li>This version provides additional methods for reserving permits without blocking to actually
 acquire them and also for scheduling tasks on permit acquisition instead of blocking. This
 means it can be readily used in non-blocking constructs.</li>
 <li>Finally, this version provides methods for forcibly taking tokens from the bucket or putting
 them back. This can be used for reconciliation when the number of permits an operation needs is
 not known apriori. In such a case, the operation acquires an estimated number of permits. On
 completion, the operation has measured the actual number of permits needed. It can then push
 tokens back into the bucket (if the estimate was too high) or remove tokens (if the estimate was
 too low).</li>
 </ol></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#RateLimiter-double-">RateLimiter</a></span>(double&nbsp;ratePermitsPerSecond)</code>
<div class="block">Creates a new limiter with the given number of permits allowed per second.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#RateLimiter-double-long-">RateLimiter</a></span>(double&nbsp;ratePermitsPerSecond,
           long&nbsp;maxStoredPermits)</code>
<div class="block">Creates a new limiter with the given number of permits allowed per second and maximum
 capacity.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#RateLimiter-double-long-long-">RateLimiter</a></span>(double&nbsp;ratePermitsPerSecond,
           long&nbsp;maxStoredPermits,
           long&nbsp;initialPermits)</code>
<div class="block">Creates a new limiter with the given number of permits allowed per second, maximum capacity,
 and initial capacity.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#RateLimiter-double-long-long-double-">RateLimiter</a></span>(double&nbsp;ratePermitsPerSecond,
           long&nbsp;maxStoredPermits,
           long&nbsp;initialPermits,
           double&nbsp;jitter)</code>
<div class="block">Creates a new "jittered" limiter with the given number of permits allowed per second,
 maximum capacity, and initial capacity.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#RateLimiter-double-long-long-double-com.bluegosling.util.Clock-">RateLimiter</a></span>(double&nbsp;ratePermitsPerSecond,
           long&nbsp;maxStoredPermits,
           long&nbsp;initialPermits,
           double&nbsp;jitter,
           <a href="../../../com/bluegosling/util/Clock.html" title="interface in com.bluegosling.util">Clock</a>&nbsp;clock)</code>
<div class="block">Creates a new "jittered" limiter that uses the given clock and the given number of permits
 allowed per second, maximum capacity, and initial capacity.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#acquire--">acquire</a></span>()</code>
<div class="block">Acquires a permit, blocking if one is not available.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#acquire-long-">acquire</a></span>(long&nbsp;permits)</code>
<div class="block">Acquires the given number of permits, blocking if they are not all immediately available.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#acquireInterruptibly--">acquireInterruptibly</a></span>()</code>
<div class="block">Acquires a permit, blocking interruptibly if one is not available.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#acquireInterruptibly-int-">acquireInterruptibly</a></span>(int&nbsp;permits)</code>
<div class="block">Acquires the given number of permits, blocking interruptibly if they are not all immediately
 available.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../com/bluegosling/concurrent/Duration.html" title="class in com.bluegosling.concurrent">Duration</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#backlogDuration--">backlogDuration</a></span>()</code>
<div class="block">Returns the duration of the current acquisition backlog.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#forceTake-long-">forceTake</a></span>(long&nbsp;permits)</code>
<div class="block">Forcibly takes permits without waiting to acquire them.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#getJitter--">getJitter</a></span>()</code>
<div class="block">Gets the current jitter amount.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#getMaxPermits--">getMaxPermits</a></span>()</code>
<div class="block">Gets the current maximum capacity of permits, for bursts.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#getRate--">getRate</a></span>()</code>
<div class="block">Gets the current allowed rate of permit acquisition, in permits per second.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledFuture.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledFuture</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#onAcquire-java.util.concurrent.Callable-java.util.concurrent.ScheduledExecutorService-">onAcquire</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;T&gt;&nbsp;task,
         <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduler)</code>
<div class="block">Acquires a permit and schedules the given task to be called when acquired.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledFuture.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledFuture</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#onAcquire-long-java.util.concurrent.Callable-java.util.concurrent.ScheduledExecutorService-">onAcquire</a></span>(long&nbsp;permits,
         <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;T&gt;&nbsp;task,
         <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduler)</code>
<div class="block">Acquires the given number of permits and schedules the given task to be called when acquired.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledFuture.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#onAcquire-long-java.lang.Runnable-java.util.concurrent.ScheduledExecutorService-">onAcquire</a></span>(long&nbsp;permits,
         <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;task,
         <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduler)</code>
<div class="block">Acquires the given number of permits and schedules the given task to be run when acquired.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledFuture.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#onAcquire-java.lang.Runnable-java.util.concurrent.ScheduledExecutorService-">onAcquire</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;task,
         <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduler)</code>
<div class="block">Acquires a permit and schedules the given task to be run when acquired.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#permitsAvailable--">permitsAvailable</a></span>()</code>
<div class="block">Returns the number of permits currently available.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#putBack-long-">putBack</a></span>(long&nbsp;permits)</code>
<div class="block">Returns the given number of permits.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="../../../com/bluegosling/concurrent/Duration.html" title="class in com.bluegosling.concurrent">Duration</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#reserve--">reserve</a></span>()</code>
<div class="block">Reserves a permit, returning the duration between now and the time the permit becomes
 available.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code><a href="../../../com/bluegosling/concurrent/Duration.html" title="class in com.bluegosling.concurrent">Duration</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#reserve-long-">reserve</a></span>(long&nbsp;permits)</code>
<div class="block">Reserves the given number of permits, returning the duration between now and the time the
 permits become available.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#setJitter-double-">setJitter</a></span>(double&nbsp;jitter)</code>
<div class="block">Sets the jitter amount.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#setMaxPermits-long-">setMaxPermits</a></span>(long&nbsp;maxStoredPermits)</code>
<div class="block">Sets the maximum capacity of permits, for bursts.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#setRate-double-">setRate</a></span>(double&nbsp;permitsPerSecond)</code>
<div class="block">Sets the allowed rate of permit acquisition, in permits per second.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#takeAll--">takeAll</a></span>()</code>
<div class="block">Takes all permits currently available, returning the count of taken permits.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#tryAcquire--">tryAcquire</a></span>()</code>
<div class="block">Tries to acquires a single permit immediately, returning false if a permit is not available.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#tryAcquire-long-">tryAcquire</a></span>(long&nbsp;permits)</code>
<div class="block">Tries to acquires a the given number of permits immediately, returning false if the permits
 are not all available.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#tryAcquire-long-long-java.util.concurrent.TimeUnit-">tryAcquire</a></span>(long&nbsp;permits,
          long&nbsp;timeLimit,
          <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Tries to acquire the given number of permits, waiting up to the given time limit if they are
 not all immediately available.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#tryAcquire-long-java.util.concurrent.TimeUnit-">tryAcquire</a></span>(long&nbsp;timeLimit,
          <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Tries to acquire a permit, waiting up to the given time limit if one is not immediately
 available.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code><a href="../../../com/bluegosling/concurrent/Duration.html" title="class in com.bluegosling.concurrent">Duration</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#tryReserve-long-long-java.util.concurrent.TimeUnit-">tryReserve</a></span>(long&nbsp;permits,
          long&nbsp;timeLimit,
          <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Reserves a permit if the duration between now and when the permit becomes available is less
 than or equal to the given time limit.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code><a href="../../../com/bluegosling/concurrent/Duration.html" title="class in com.bluegosling.concurrent">Duration</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bluegosling/concurrent/RateLimiter.html#tryReserve-long-java.util.concurrent.TimeUnit-">tryReserve</a></span>(long&nbsp;timeLimit,
          <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Reserves a permit if the duration between now and when the permit becomes available is less
 than or equal to the given time limit.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RateLimiter-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RateLimiter</h4>
<pre>public&nbsp;RateLimiter(double&nbsp;ratePermitsPerSecond)</pre>
<div class="block">Creates a new limiter with the given number of permits allowed per second. The rate limiter
 will allow storing up to one second's worth of permits, to allow for bursts. If the
 limiter allows fewer than one permit per second, the burst capacity is just a single permit.
 The limiter will initially be "full", allowing an initial burst for up to one second's worth
 of activity.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ratePermitsPerSecond</code> - the allowed number of permits per second</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the rate is non-positive or <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html?is-external=true#NaN" title="class or interface in java.lang">NaN</a></dd>
</dl>
</li>
</ul>
<a name="RateLimiter-double-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RateLimiter</h4>
<pre>public&nbsp;RateLimiter(double&nbsp;ratePermitsPerSecond,
                   long&nbsp;maxStoredPermits)</pre>
<div class="block">Creates a new limiter with the given number of permits allowed per second and maximum
 capacity. The maximum capacity is the limit to which unused permits can accrue, which allows
 for bursts. The limiter will initially be "full", allowing an initial burst for up to one
 second's worth of activity.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ratePermitsPerSecond</code> - the allowed number of permits per second</dd>
<dd><code>maxStoredPermits</code> - the maximum capacity for bursts</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the rate is non-positive or <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html?is-external=true#NaN" title="class or interface in java.lang">NaN</a>
       or if the given maximum capacity is non-positive</dd>
</dl>
</li>
</ul>
<a name="RateLimiter-double-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RateLimiter</h4>
<pre>public&nbsp;RateLimiter(double&nbsp;ratePermitsPerSecond,
                   long&nbsp;maxStoredPermits,
                   long&nbsp;initialPermits)</pre>
<div class="block">Creates a new limiter with the given number of permits allowed per second, maximum capacity,
 and initial capacity. The maximum capacity is the limit to which unused permits can accrue,
 which allows for bursts. The initial capacity can allow an initial burst immediately after
 construction, up to the given number of permits.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ratePermitsPerSecond</code> - the allowed number of permits per second</dd>
<dd><code>maxStoredPermits</code> - the maximum capacity for bursts</dd>
<dd><code>initialPermits</code> - the initial capacity, allowing for an initial burst if greater than zero</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the rate is non-positive or <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html?is-external=true#NaN" title="class or interface in java.lang">NaN</a>
       or if the given maximum or initial capacity numbers are non-positive</dd>
</dl>
</li>
</ul>
<a name="RateLimiter-double-long-long-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RateLimiter</h4>
<pre>public&nbsp;RateLimiter(double&nbsp;ratePermitsPerSecond,
                   long&nbsp;maxStoredPermits,
                   long&nbsp;initialPermits,
                   double&nbsp;jitter)</pre>
<div class="block">Creates a new "jittered" limiter with the given number of permits allowed per second,
 maximum capacity, and initial capacity. The maximum capacity is the limit to which unused
 permits can accrue, which allows for bursts. The initial capacity can allow an initial burst
 immediately after construction, up to the given number of permits.
 
 <p>The amount of jitter must be between 0 and 1 (inclusive). It adds randomness to permit
 acquisition. So a limiter that allows up to 10 permits per second with a jitter of 1.0 may
 allow as few as zero permits in some seconds and up to 20 permits in others. With a jitter of
 0.1, it would allow as few as nine permits on some seconds and up to 11 in others.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ratePermitsPerSecond</code> - the allowed number of permits per second</dd>
<dd><code>maxStoredPermits</code> - the maximum capacity for bursts</dd>
<dd><code>initialPermits</code> - the initial capacity, allowing for an initial burst if greater than zero</dd>
<dd><code>jitter</code> - the amount of jitter</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the rate is non-positive or <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html?is-external=true#NaN" title="class or interface in java.lang">NaN</a>,
       if the given maximum or initial capacity numbers are non-positive, or if the given
       amount of jitter is less than zero or greater than one</dd>
</dl>
</li>
</ul>
<a name="RateLimiter-double-long-long-double-com.bluegosling.util.Clock-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RateLimiter</h4>
<pre>public&nbsp;RateLimiter(double&nbsp;ratePermitsPerSecond,
                   long&nbsp;maxStoredPermits,
                   long&nbsp;initialPermits,
                   double&nbsp;jitter,
                   <a href="../../../com/bluegosling/util/Clock.html" title="interface in com.bluegosling.util">Clock</a>&nbsp;clock)</pre>
<div class="block">Creates a new "jittered" limiter that uses the given clock and the given number of permits
 allowed per second, maximum capacity, and initial capacity. The maximum capacity is the limit
 to which unused permits can accrue, which allows for bursts. The initial capacity can allow an
 initial burst immediately after construction, up to the given number of permits.
 
 <p>The amount of jitter must be between 0 and 1 (inclusive). It adds randomness to permit
 acquisition. So a limiter that allows up to 10 permits per second with a jitter of 1.0 may
 allow as few as zero permits in some seconds and up to 20 permits in others. With a jitter of
 0.1, it would allow as few as nine permits on some seconds and up to 11 in others.
 
 <p>The clock, which by default is a <a href="../../../com/bluegosling/util/SystemClock.html" title="enum in com.bluegosling.util"><code>SystemClock</code></a>, can be used to override accounting
 of time. This can be used to control how acquisitions block until a permit is ready. Note that
 is has no impact on calls that do not block, like <a href="../../../com/bluegosling/concurrent/RateLimiter.html#reserve--"><code>reserve()</code></a> or
 <a href="../../../com/bluegosling/concurrent/RateLimiter.html#onAcquire-java.util.concurrent.Callable-java.util.concurrent.ScheduledExecutorService-"><code>onAcquire(Callable, ScheduledExecutorService)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ratePermitsPerSecond</code> - the allowed number of permits per second</dd>
<dd><code>maxStoredPermits</code> - the maximum capacity for bursts</dd>
<dd><code>initialPermits</code> - the initial capacity, allowing for an initial burst if greater than zero</dd>
<dd><code>jitter</code> - the amount of jitter</dd>
<dd><code>clock</code> - the clock used to account for time and block until permits are ready</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the rate is non-positive or <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html?is-external=true#NaN" title="class or interface in java.lang">NaN</a>,
       if the given maximum or initial capacity numbers are non-positive, or if the given
       amount of jitter is less than zero or greater than one</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="acquire--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquire</h4>
<pre>public&nbsp;void&nbsp;acquire()</pre>
<div class="block">Acquires a permit, blocking if one is not available. This method is shorthand for
 <code>limiter.acquire(1)</code>.</div>
</li>
</ul>
<a name="acquire-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquire</h4>
<pre>public&nbsp;void&nbsp;acquire(long&nbsp;permits)</pre>
<div class="block">Acquires the given number of permits, blocking if they are not all immediately available.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permits</code> - the number of permits being acquired</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given number of permits is non-positive</dd>
</dl>
</li>
</ul>
<a name="acquireInterruptibly--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireInterruptibly</h4>
<pre>public&nbsp;void&nbsp;acquireInterruptibly()
                          throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Acquires a permit, blocking interruptibly if one is not available. This method is shorthand
 for <code>limiter.acquireInterruptibly(1)</code>.
 
 <p>If the permit is reserved and this thread is interrupted while waiting, the permit is
 <a href="../../../com/bluegosling/concurrent/RateLimiter.html#putBack-long-">put back</a>.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if the current thread is interrupted while waiting for the permit</dd>
</dl>
</li>
</ul>
<a name="acquireInterruptibly-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireInterruptibly</h4>
<pre>public&nbsp;void&nbsp;acquireInterruptibly(int&nbsp;permits)
                          throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Acquires the given number of permits, blocking interruptibly if they are not all immediately
 available.
 
 <p>If the permits are reserved and this thread is interrupted while waiting for them, the
 permits are <a href="../../../com/bluegosling/concurrent/RateLimiter.html#putBack-long-">put back</a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permits</code> - the number of permits being acquired</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if the current thread is interrupted while waiting for the
       permits to become available</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given number of permits is non-positive</dd>
</dl>
</li>
</ul>
<a name="tryAcquire--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryAcquire</h4>
<pre>public&nbsp;boolean&nbsp;tryAcquire()</pre>
<div class="block">Tries to acquires a single permit immediately, returning false if a permit is not available.
 This method is shorthand for <code>limiter.tryAcquire(1)</code>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the permit was successfully acquired or false if one was not available</dd>
</dl>
</li>
</ul>
<a name="tryAcquire-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryAcquire</h4>
<pre>public&nbsp;boolean&nbsp;tryAcquire(long&nbsp;permits)</pre>
<div class="block">Tries to acquires a the given number of permits immediately, returning false if the permits
 are not all available.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permits</code> - the number of permits being acquired</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the permits were successfully acquired or false if they were not all available</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given number of permits is non-positive</dd>
</dl>
</li>
</ul>
<a name="tryAcquire-long-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryAcquire</h4>
<pre>public&nbsp;boolean&nbsp;tryAcquire(long&nbsp;timeLimit,
                          <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)
                   throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Tries to acquire a permit, waiting up to the given time limit if one is not immediately
 available. This method is shorthand for <code>limiter.tryAcquire(1, timeLimit, unit)</code>.
 
 <p>Note that if the permit will not be available in time, this method does not block and will
 instead return immediately.
 
 <p>If the permit is reserved and this thread is interrupted while waiting for it, the
 permit is <a href="../../../com/bluegosling/concurrent/RateLimiter.html#putBack-long-">put back</a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeLimit</code> - the limit of time to wait for the permit to become available</dd>
<dd><code>unit</code> - the unit of the time limit</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the permit was successfully acquired or false if they will not be available
       before the given time limit expires</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if the current thread is interrupted while waiting for the
       permit to become available</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given time limit is negative</dd>
</dl>
</li>
</ul>
<a name="tryAcquire-long-long-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryAcquire</h4>
<pre>public&nbsp;boolean&nbsp;tryAcquire(long&nbsp;permits,
                          long&nbsp;timeLimit,
                          <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)
                   throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Tries to acquire the given number of permits, waiting up to the given time limit if they are
 not all immediately available.
 
 <p>Note that if the permits will not be available in time, this method does not block and will
 instead return immediately.
 
 <p>If the permits are reserved and this thread is interrupted while waiting for them, the
 permits are <a href="../../../com/bluegosling/concurrent/RateLimiter.html#putBack-long-">put back</a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permits</code> - the number of permits being acquired</dd>
<dd><code>timeLimit</code> - the limit of time to wait for the permits to become available</dd>
<dd><code>unit</code> - the unit of the time limit</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the permits were successfully acquired or false if they will not be available
       before the given time limit expires</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if the current thread is interrupted while waiting for the
       permits to become available</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given number of permits is non-positive or if the
       given time limit is negative</dd>
</dl>
</li>
</ul>
<a name="reserve--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reserve</h4>
<pre>public&nbsp;<a href="../../../com/bluegosling/concurrent/Duration.html" title="class in com.bluegosling.concurrent">Duration</a>&nbsp;reserve()</pre>
<div class="block">Reserves a permit, returning the duration between now and the time the permit becomes
 available. This method is shorthand for <code>limiter.reserve(1)</code>.
 
 <p>This does not block, expecting the caller to block or to schedule an action in the
 future after the returned duration elapses.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the duration between now and the moment the reserved permit becomes available</dd>
</dl>
</li>
</ul>
<a name="reserve-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reserve</h4>
<pre>public&nbsp;<a href="../../../com/bluegosling/concurrent/Duration.html" title="class in com.bluegosling.concurrent">Duration</a>&nbsp;reserve(long&nbsp;permits)</pre>
<div class="block">Reserves the given number of permits, returning the duration between now and the time the
 permits become available. This does not block, expecting the caller to block or to schedule
 an action in the future after the returned duration elapses.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permits</code> - the number of permits being reserved</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the duration between now and the moment the reserved permits become available</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given number of permits is non-positive</dd>
</dl>
</li>
</ul>
<a name="tryReserve-long-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryReserve</h4>
<pre>public&nbsp;<a href="../../../com/bluegosling/concurrent/Duration.html" title="class in com.bluegosling.concurrent">Duration</a>&nbsp;tryReserve(long&nbsp;timeLimit,
                           <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</pre>
<div class="block">Reserves a permit if the duration between now and when the permit becomes available is less
 than or equal to the given time limit. This method is shorthand for
 <code>limiter.tryReserve(1, timeLimit, unit)</code>.
 
 <p>This does not block, expecting the caller to block or to schedule an action in the
 future after the returned duration elapses.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeLimit</code> - the limit of time for the permits to become available</dd>
<dd><code>unit</code> - the unit of the time limit</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the duration between now and the moment the reserved permit becomes available or
       <code>null</code> if that duration would be greater than the given time limit</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given time limit is negative</dd>
</dl>
</li>
</ul>
<a name="tryReserve-long-long-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryReserve</h4>
<pre>public&nbsp;<a href="../../../com/bluegosling/concurrent/Duration.html" title="class in com.bluegosling.concurrent">Duration</a>&nbsp;tryReserve(long&nbsp;permits,
                           long&nbsp;timeLimit,
                           <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</pre>
<div class="block">Reserves a permit if the duration between now and when the permit becomes available is less
 than or equal to the given time limit. This method is shorthand for
 <code>limiter.tryReserve(1, timeLimit, unit)</code>.
 
 <p>This does not block, expecting the caller to block or to schedule an action in the
 future after the returned duration elapses.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permits</code> - the number of permits being reserved</dd>
<dd><code>timeLimit</code> - the limit of time for the permits to become available</dd>
<dd><code>unit</code> - the unit of the time limit</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the duration between now and the moment the reserved permit becomes available or
       <code>null</code> if that duration would be greater than the given time limit</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given number of permits is non-positive or if the
       given time limit is negative</dd>
</dl>
</li>
</ul>
<a name="onAcquire-java.util.concurrent.Callable-java.util.concurrent.ScheduledExecutorService-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onAcquire</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledFuture.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledFuture</a>&lt;T&gt;&nbsp;onAcquire(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;T&gt;&nbsp;task,
                                        <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduler)</pre>
<div class="block">Acquires a permit and schedules the given task to be called when acquired. This method
 reserves the permit and then uses the given executor to schedule the task for when the permit
 becomes available. This method is shorthand for <code>limiter.onAcquire(1, task, scheduler)</code>.
 
 <p>Note that if the returned future is cancelled before the task is called, the reserved
 permit is <a href="../../../com/bluegosling/concurrent/RateLimiter.html#putBack-long-">put back</a>.
 
 <p>If the given executor is a <code>ListeningScheduledExecutorService</code> then the returned
 future will actually implement <code>ListenableScheduledFuture</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>task</code> - the task that is called</dd>
<dd><code>scheduler</code> - the executor used to schedule the task</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future that will complete when the task completes</dd>
</dl>
</li>
</ul>
<a name="onAcquire-long-java.util.concurrent.Callable-java.util.concurrent.ScheduledExecutorService-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onAcquire</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledFuture.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledFuture</a>&lt;T&gt;&nbsp;onAcquire(long&nbsp;permits,
                                        <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;T&gt;&nbsp;task,
                                        <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduler)</pre>
<div class="block">Acquires the given number of permits and schedules the given task to be called when acquired.
 This method reserves the permits and then uses the given executor to schedule the task for
 when the permits become available.
 
 <p>Note that if the returned future is cancelled before the task is called, the reserved
 permits are <a href="../../../com/bluegosling/concurrent/RateLimiter.html#putBack-long-">put back</a>.
 
 <p>If the given executor is a <code>ListeningScheduledExecutorService</code> then the returned
 future will actually implement <code>ListenableScheduledFuture</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permits</code> - the number of permits being acquired</dd>
<dd><code>task</code> - the task that is called</dd>
<dd><code>scheduler</code> - the executor used to schedule the task</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future that will complete when the task completes</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given number of permits is non-positive</dd>
</dl>
</li>
</ul>
<a name="onAcquire-java.lang.Runnable-java.util.concurrent.ScheduledExecutorService-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onAcquire</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledFuture.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;onAcquire(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;task,
                                       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduler)</pre>
<div class="block">Acquires a permit and schedules the given task to be run when acquired. This method reserves
 the permit and then uses the given executor to schedule the task for when the permit becomes
 available. This method is shorthand for <code>limiter.onAcquire(1, task, scheduler)</code>.
 
 <p>Note that if the returned future is cancelled before the task is run, the reserved permit
 is <a href="../../../com/bluegosling/concurrent/RateLimiter.html#putBack-long-">put back</a>.
 
 <p>If the given executor is a <code>ListeningScheduledExecutorService</code> then the returned
 future will actually implement <code>ListenableScheduledFuture</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>task</code> - the task that is run</dd>
<dd><code>scheduler</code> - the executor used to schedule the task</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future that will complete when the task completes</dd>
</dl>
</li>
</ul>
<a name="onAcquire-long-java.lang.Runnable-java.util.concurrent.ScheduledExecutorService-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onAcquire</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledFuture.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;onAcquire(long&nbsp;permits,
                                       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;task,
                                       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduler)</pre>
<div class="block">Acquires the given number of permits and schedules the given task to be run when acquired.
 This method reserves the permits and then uses the given executor to schedule the task for
 when the permits become available.
 
 <p>Note that if the returned future is cancelled before the task is run, the reserved permits
 are <a href="../../../com/bluegosling/concurrent/RateLimiter.html#putBack-long-">put back</a>.
 
 <p>If the given executor is a <code>ListeningScheduledExecutorService</code> then the returned
 future will actually implement <code>ListenableScheduledFuture</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permits</code> - the number of permits being acquired</dd>
<dd><code>task</code> - the task that is run</dd>
<dd><code>scheduler</code> - the executor used to schedule the task</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future that will complete when the task completes</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given number of permits is non-positive</dd>
</dl>
</li>
</ul>
<a name="putBack-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putBack</h4>
<pre>public&nbsp;void&nbsp;putBack(long&nbsp;permits)</pre>
<div class="block">Returns the given number of permits. This simply adds them to the current number of stored
 permits.
 
 <p>There is no enforced requirement that the caller has first acquired the permits, but that
 is the expected and correct usage. Otherwise, use of this method may cause this limiter to
 allow acquisition of permits at a rate that is greater than the currently configured rate.
 
 <p>Frequent use of this method may cause the limiter to allow more bursty acquisition patterns
 than expected. The expected use is to return permits that go unused. This could be because the
 unit of work that needed the permits is cancelled or it could be for scenarios where the
 number of permits required for a task is not unknown up-front. In the latter case, an estimate
 for the number of permits is acquired. If the actual work needed less than the estimate, the
 unused permits can be put back. (Similarly, if the actual work needed more than the estimate,
 the extra permits can be <a href="../../../com/bluegosling/concurrent/RateLimiter.html#forceTake-long-">taken forcibly</a> to reconcile.)
 
 <p>Use of this method can change the "fairness" of acquisitions. For example, if the limiter
 allows just one permit per second and ten tasks each acquire a permit, they will end up
 running with an interval of one second between. If one of these tasks is cancelled such that
 its permit is returned, its reservation is still taken and effectively remains empty. To
 compensate, the returned permit will allow any subsequent acquisition to succeed immediately.
 Since the acquisition could occur before the reserved point in time, this would appear to be
 a momentary burst (an extra task running in the same second as another) that is reconciled by
 the coming gap for the actual reserved moment.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permits</code> - the number of permits to return</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given number of permits is negative</dd>
</dl>
</li>
</ul>
<a name="forceTake-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceTake</h4>
<pre>public&nbsp;void&nbsp;forceTake(long&nbsp;permits)</pre>
<div class="block">Forcibly takes permits without waiting to acquire them. This method always succeeds, so if
 more permits are taken than actually available, the "stored balance" becomes negative. This
 will delay subsequent acquisitions as if the taker had actually reserved all of the taken
 permits.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permits</code> - the number of permits to take</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given number of permits is negative</dd>
</dl>
</li>
</ul>
<a name="takeAll--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>takeAll</h4>
<pre>public&nbsp;long&nbsp;takeAll()</pre>
<div class="block">Takes all permits currently available, returning the count of taken permits.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of permits taken, which can be zero of there were no permits available</dd>
</dl>
</li>
</ul>
<a name="permitsAvailable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>permitsAvailable</h4>
<pre>public&nbsp;long&nbsp;permitsAvailable()</pre>
<div class="block">Returns the number of permits currently available. Not that this method is racy since the
 value can be changing due to concurrent acquisitions. This method is intended for
 instrumentation and monitoring purposes.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of permits immediately available</dd>
</dl>
</li>
</ul>
<a name="backlogDuration--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>backlogDuration</h4>
<pre>public&nbsp;<a href="../../../com/bluegosling/concurrent/Duration.html" title="class in com.bluegosling.concurrent">Duration</a>&nbsp;backlogDuration()</pre>
<div class="block">Returns the duration of the current acquisition backlog. The duration represents the time
 between now and the moment the next successful acquisition would actually execute. Note that
 this method is racy since the value can be changing due to concurrent acquisitions. This
 method is intended for instrumentation and monitoring purposes.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the duration between now and the moment the next successful acquisition would execute</dd>
</dl>
</li>
</ul>
<a name="getRate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRate</h4>
<pre>public&nbsp;double&nbsp;getRate()</pre>
<div class="block">Gets the current allowed rate of permit acquisition, in permits per second.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the current allowed rate of permit acquisition</dd>
</dl>
</li>
</ul>
<a name="setRate-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRate</h4>
<pre>public&nbsp;void&nbsp;setRate(double&nbsp;permitsPerSecond)</pre>
<div class="block">Sets the allowed rate of permit acquisition, in permits per second.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permitsPerSecond</code> - the new allowed rate of permit acquisition</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the rate is non-positive or <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html?is-external=true#NaN" title="class or interface in java.lang">NaN</a></dd>
</dl>
</li>
</ul>
<a name="getMaxPermits--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxPermits</h4>
<pre>public&nbsp;long&nbsp;getMaxPermits()</pre>
<div class="block">Gets the current maximum capacity of permits, for bursts.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the maximum capacity of permits</dd>
</dl>
</li>
</ul>
<a name="setMaxPermits-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxPermits</h4>
<pre>public&nbsp;void&nbsp;setMaxPermits(long&nbsp;maxStoredPermits)</pre>
<div class="block">Sets the maximum capacity of permits, for bursts.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxStoredPermits</code> - the new maximum capacity of permits</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the capacity is non-positive</dd>
</dl>
</li>
</ul>
<a name="getJitter--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJitter</h4>
<pre>public&nbsp;double&nbsp;getJitter()</pre>
<div class="block">Gets the current jitter amount. The returned value will be between 0.0 and 1.0 where 0.0 means
 no randomness or jitter and 1.0 is the maximum jitter allowed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the current jitter amount</dd>
</dl>
</li>
</ul>
<a name="setJitter-double-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setJitter</h4>
<pre>public&nbsp;void&nbsp;setJitter(double&nbsp;jitter)</pre>
<div class="block">Sets the jitter amount. The value must be between 0.0 and 1.0 where 0.0 means no randomness or
 jitter and 1.0 is the maximum jitter allowed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>jitter</code> - the new jitter amount</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given amount of jitter is less than zero or greater
       than one</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bluegosling/concurrent/RateLimitedBlockingQueue.html" title="class in com.bluegosling.concurrent"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/bluegosling/concurrent/ReentranceException.html" title="class in com.bluegosling.concurrent"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bluegosling/concurrent/RateLimiter.html" target="_top">Frames</a></li>
<li><a href="RateLimiter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
